---
// src/components/Slider.astro
---

<div class="relative max-w-6xl mx-auto overflow-hidden rounded-lg">
  <!-- Slider Track -->
  <div class="flex transition-transform duration-500 ease-in-out w-[100%]" id="sliderTrack">
    <!-- Slide 1 -->
    <div class="w-full flex-shrink-0">
      <div class="grid grid-cols-3 h-full gap-10 bg-white pt-12 pb-5 pl-5 pr-5 md:pr-30 w-[75%] md:w-[85%] mx-auto rounded-xl border-t-10 border-t-slate-800 border-r-10 border-r-slate-800">
        <div class="col-span-3 md:col-span-1">
          <img src="/img/profileSlider1.png" class="mx-auto md:mx-0" alt="">
        </div>
        <div class="col-span-3 md:col-span-2 mt-0 md:mt-10">
          <p class="text-[#005593] font-bold text-lg text-center md:text-left">Ana Luisa Rodriguez</p>
          <p class="text-[#00bfff] text-sm text-center md:text-left">Préstamo de $5,000</p> 
          <p class="text-gray-500 text-lg mt-2">
            Gracias al préstamo de $5,000 que adquirí con Percapita pude regalarle un viaje a la playa a toda mi familia, estuvimos muy contentos.
          </p>
        </div>
      </div>
    </div>

    <!-- Slide 2 -->
    <div class="w-full flex-shrink-0">
      <div class="grid grid-cols-3 h-full gap-10 bg-white pt-12 pb-5 pl-5 pr-5 md:pr-30 w-[75%] md:w-[85%] mx-auto rounded-xl border-t-10 border-t-slate-800 border-r-10 border-r-slate-800">
        <div class="col-span-3 md:col-span-1">
          <img src="/img/profileSlider2.png" class="mx-auto md:mx-0" alt="">
        </div>
        <div class="col-span-3 md:col-span-2 mt-0 md:mt-10">
          <p class="text-[#005593] font-bold text-lg text-center md:text-left">Angélica Luis De Velasco</p>
          <p class="text-[#00bfff] text-sm text-center md:text-left">Préstamo de $14,000</p> 
          <p class="text-gray-500 text-lg mt-2">
            Con el prestamo de $14,000 que adquirí con Percapita pude impulsar mi negocio y ayudar a mi familia.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Botón Anterior -->
  <button
    class="absolute top-1/2 left-2 -translate-y-1/2 bg-black/50 text-white size-10 rounded-full hover:bg-black/70 focus:outline-none"
    id="prevButton"
    aria-label="Slide anterior"
  >
    ❮
  </button>

  <!-- Botón Siguiente -->
  <button
    class="absolute top-1/2 right-2 -translate-y-1/2 bg-black/50 text-white size-10 rounded-full hover:bg-black/70 focus:outline-none"
    id="nextButton"
    aria-label="Siguiente slide"
  >
    ❯
  </button>
 
</div>

<script>
  // Esperar a que el DOM se haya cargado completamente
  document.addEventListener('DOMContentLoaded', () => {
    let currentSlide = 0;
    const totalSlides = 2;
    const track = document.getElementById('sliderTrack') as HTMLDivElement;

    // Actualiza la posición del slider y los puntos
    function updateSlider() {
      track.style.transform = `translateX(-${currentSlide * 100}%)`;

      // Actualiza los puntos
      document.querySelectorAll('.dot').forEach((dot, index) => {
        dot.className = `dot w-3 h-3 rounded-full cursor-pointer ${
          index === currentSlide ? 'bg-white' : 'bg-white/50'
        }`;
      });
    }

    // Función para ir al siguiente slide
    function nextSlide() {
      currentSlide = (currentSlide + 1) % totalSlides;
      updateSlider();
    }

    // Función para ir al slide anterior
    function prevSlide() {
      currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
      updateSlider();
    }

    // Función para ir a un slide específico
    function goToSlide(index:number) {
      currentSlide = index;
      updateSlider();
    }

    // Event listeners para los botones
    document.getElementById('nextButton')?.addEventListener('click', nextSlide);
    document.getElementById('prevButton')?.addEventListener('click', prevSlide);

    // Opcional autoplay
    setInterval(nextSlide, 5000);
  });
</script>
